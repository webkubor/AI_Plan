## Ollama 

Ollama æ˜¯ä¸€ä¸ªâ€œæœ¬åœ°è·‘å¤§æ¨¡å‹/embedding æ¨¡å‹â€çš„è¿è¡Œæ—¶ï¼Œç›¸å½“äºä½ ç”µè„‘ä¸Šçš„ä¸€ä¸ªæ¨¡å‹æœåŠ¡ï¼ˆç±»ä¼¼æœ¬åœ°çš„ OpenAI APIï¼‰ï¼Œç”¨å®ƒå¯ä»¥åšåˆ°ï¼š

- ä¸ç”¨ API Key
- ä¸æŒ‰é‡è®¡è´¹ï¼ˆæˆæœ¬ä¸»è¦æ˜¯ä½ è‡ªå·±çš„æœºå™¨ç®—åŠ›/ç”µè´¹ï¼‰
- æ–‡æœ¬ä¸å‡ºæœ¬æœºï¼ˆå¯¹éšç§æ›´å‹å¥½ï¼‰
- å¯ä»¥ä¸“é—¨è·‘ **embedding æ¨¡å‹**ï¼ŒæŠŠ `AI_Common` åˆ‡ç‰‡åè½¬æˆå‘é‡å†™è¿› Milvusï¼ˆæœ¬åœ°çš„å‘é‡åº“ï¼‰

## å®‰è£… Ollamaï¼ˆmacOSï¼‰

ä½ å¯ä»¥é€‰ä¸€ç§æ–¹å¼ï¼š

1. Homebrewï¼ˆæ¨èï¼Œæœ€çœäº‹ï¼‰

```
brew install ollama
```

1. å®˜æ–¹ App å®‰è£…ï¼ˆä¹Ÿå¯ä»¥ï¼‰

- å» Ollama å®˜ç½‘ä¸‹è½½å¹¶å®‰è£…ï¼Œç„¶åç¡®ä¿ `ollama` å‘½ä»¤å¯ç”¨

è£…å¥½åéªŒè¯ï¼š

```
ollama --version
```

## è¦è·‘æœ¬åœ° embeddingï¼Œéœ€è¦æ‹‰ä¸€ä¸ª embedding æ¨¡å‹

å¸¸ç”¨çš„æœ¬åœ° embedding æ¨¡å‹ï¼ˆç¤ºä¾‹ï¼‰ï¼š

- `nomic-embed-text`ï¼ˆè½»é‡ã€å¸¸è§ï¼‰
- `bge-m3` / `bge-large`ï¼ˆæ•ˆæœé€šå¸¸æ›´å¼ºï¼Œä½†æ›´é‡ï¼‰

æ‹‰å–ç¤ºä¾‹ï¼ˆè£…å¥½ Ollama åï¼‰ï¼š

```
ollama pull nomic-embed-text
```

ç„¶åæˆ‘ä»¬ä¼šæŠŠ `milvus-tools` çš„å…¥åº“è„šæœ¬ä» `mock embedding` æ”¹æˆï¼š

- è°ƒç”¨æœ¬æœº Ollama ç”Ÿæˆå‘é‡
- å…¨é‡é‡å»º â†’ å…¨é‡å…¥åº“ï¼ˆä½ é€‰æ‹©çš„ç­–ç•¥ï¼‰

ä½ æƒ³æˆ‘ç°åœ¨ç›´æ¥å¸®ä½ æ‰§è¡Œ `brew install ollama` å®‰è£…å—ï¼Ÿå¦‚æœä½ åŒæ„ï¼Œæˆ‘å°±ç»§ç»­è£…å¹¶æ‹‰ä¸€ä¸ª `nomic-embed-text`ï¼Œç„¶åæŠŠå…¥åº“è„šæœ¬æ”¹æˆâ€œçœŸå®æœ¬åœ° embeddingâ€ã€‚

## Ollama è·Ÿ å‘é‡æ•°æ®åº“ Milvus çš„å…³ç³»ï¼ˆç”¨ä¸€å¥è¯ï¼‰

- **Ollama è´Ÿè´£æŠŠæ–‡æœ¬å˜æˆå‘é‡ï¼ˆembeddingï¼‰**
- **Milvus è´Ÿè´£å­˜å‘é‡ + åšç›¸ä¼¼åº¦æ£€ç´¢**

##

> **Ollama = æœ¬åœ°å¤§æ¨¡å‹è¿è¡Œå™¨ / ç®¡ç†å™¨**

å®ƒä¸»è¦å¸®ä½ åš 4 ä»¶äº‹ï¼š

1. ä¸‹è½½æ¨¡å‹ï¼ˆæƒé‡ï¼‰
2. å¯åŠ¨æ¨ç†è¿›ç¨‹
3. ç®¡ç†ä¸Šä¸‹æ–‡ / æ˜¾å­˜ / å‚æ•°ï¼ˆå¦‚ num_ctxï¼‰
4. æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ HTTP / CLI æ¥å£

#### æŠŠå¤§æ¨¡å‹ç³»ç»Ÿæ‹†å¼€

```js
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨å±‚     â”‚  â† ä½ çš„ CLI / GUI / Agent / MCP
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ¨ç†æ¥å£   â”‚  â† HTTP / SDK
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è¿è¡Œå™¨     â”‚  â† Ollama / llama.cpp / vLLM / TensorRT-LLM
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ¨¡å‹æƒé‡   â”‚  â† LLaMA / Qwen / GLM / nomic
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç¡¬ä»¶       â”‚  â† CPU / GPU / MPS
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| **è¿è¡Œå™¨**   | **å…¸å‹ç”¨é€”** | **ç‰¹ç‚¹**             |
| ------------ | ------------ | -------------------- |
| **Ollama**   | æœ¬åœ°å¼€å‘     | ç®€å•ã€çœäº‹ã€é»˜è®¤å‚æ•° |
| llama.cpp    | æœ¬åœ°/åµŒå…¥å¼  | è½»é‡ã€å¯æ§           |
| vLLM         | æœåŠ¡å™¨       | é«˜å¹¶å‘ã€é«˜åå       |
| TensorRT-LLM | NVIDIA       | æè‡´æ€§èƒ½             |
| Transformers | ç ”ç©¶/è„šæœ¬    | çµæ´»ä½†é‡             |

## **ä¸ºä»€ä¹ˆå¾ˆå¤šäººâ€œæ„Ÿè§‰ç¦»ä¸å¼€ Ollamaâ€ï¼Ÿ**



```js
ollama pull qwen2.5
ollama run qwen2.5
```

ä¸ç”¨ä½ ç®¡ï¼š

- æƒé‡æ ¼å¼
- tokenizer
- kv cache
- æ¨ç†å‚æ•°

ğŸ‘‰ **å®ƒåƒ Docker ä¹‹äºå®¹å™¨ã€‚**



`````
ollama list
NAME                        ID              SIZE      MODIFIED      
deepseek-r1:latest          6995872bfe4c    5.2 GB    5 days ago       
nemotron-3-nano:latest      b725f1117407    24 GB     5 days ago       
nomic-embed-text:latest     0a109f422b47    274 MB    5 days ago       
deepseek-v3.1:671b-cloud    d3749919e45f    -         2 weeks ago      
llama3.2-vision:latest      6f2f9757ae97    7.8 GB    2 weeks ago      
llama3.2:latest             a80c4f17acd5    2.0 GB    13 months ago 
`````

1. **deepseek-r1:latest** (æ¨ç†/è§„åˆ’ï¼ˆAgent ä¸­æ¢ã€å¤æ‚æ­¥éª¤ï¼‰)
2. llama3.2:latest(è§’è‰²ï¼šæ—¥å¸¸èŠå¤©/å†™å‰ç«¯/è½»ä»»åŠ¡ï¼ˆæ›´çœèµ„æºï¼‰)
3. **nomic-embed-text:latest**:è§’è‰²ï¼šRAG å‘é‡æ£€ç´¢ï¼ˆembeddingï¼‰ï¼Œ**ä¸èƒ½ç”¨æ¥èŠå¤©**

`````
Agent / ä¸»æ¨
âœ”ï¸ mistral-7b
âœ”ï¸ qwen-2.5
âœ”ï¸ deepseek-r1

ä»£ç è¾…åŠ©
âœ”ï¸ codellama-7b
âœ”ï¸ starcoder

Embedding
âœ”ï¸ nomic-embed-text

è§†è§‰ï¼ˆå¯é€‰ï¼‰
âœ”ï¸ llama3.2-vision
`````



## æˆ‘æœ€åçš„é€‰æ‹©

>  **Qwen-2.5 7Bï¼ˆé€šç”¨ Agent / æ‰§è¡Œï¼‰**
>
>  **DeepSeek-R1ï¼ˆä¸»æ¨ç† / è§„åˆ’ï¼‰**

#### å®‰è£…æ–¹å¼

```js
ollama pull deepseek-r1:latest
ollama pull qwen2.5:7b
```

æŸ¥çœ‹æ–¹å¼

```â€˜jsâ€™
ollama list
```

å®šä¹‰åˆ«å

`````
alias deepseek='ollama run deepseek-r1:latest'
alias qwen='ollama run qwen2.5:7b'
`````

